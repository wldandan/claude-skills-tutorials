# Skills vs Sub-agents: 使用场景指南

## 概述

在 Claude 代码中，**Skills** 和 **Sub-agents** 是两种不同的架构模式，用于组织和扩展 AI 助手的能力。理解它们的使用场景对于构建高效、可维护的系统至关重要。

## Skills（技能）

### 什么是 Skills？

Skills 是封装好的、可重用的功能模块，通常包含：
- 预定义的脚本和工具
- 特定的领域知识
- 标准化的输入/输出接口

### 何时使用 Skills？

✅ **适合使用 Skills 的场景：**

1. **单一、明确的任务**
   - 执行特定操作（如文件读写、API 调用、数据处理）
   - 任务边界清晰，不需要复杂的决策流程

2. **可重用的功能**
   - 多个场景都需要相同的功能
   - 需要保持行为一致性

3. **轻量级操作**
   - 快速执行，不需要复杂的状态管理
   - 输入输出简单直接

4. **工具类功能**
   - 计算器、单位转换、格式化等
   - 数据查询、搜索等

### Skills 的特点

- ✅ **优点：**
  - 轻量级，执行快速
  - 易于测试和维护
  - 可重用性强
  - 资源消耗低

- ❌ **缺点：**
  - 脚本无法在 Skills 之间共享（增加维护成本）
  - 不适合复杂的工作流
  - 状态管理能力有限

## Sub-agents（子代理）

### 什么是 Sub-agents？

Sub-agents 是独立的 AI 代理实例，具有：
- 自己的上下文和记忆
- 独立的决策能力
- 可以处理复杂的多步骤任务

### 何时使用 Sub-agents？

✅ **适合使用 Sub-agents 的场景：**

1. **复杂的多步骤任务**
   - 需要多个决策点
   - 需要根据中间结果调整策略
   - 任务涉及多个阶段

2. **需要独立上下文**
   - 任务需要保持自己的对话历史
   - 需要记住之前的决策和状态
   - 不同任务之间需要隔离

3. **专业领域处理**
   - 需要深度领域知识
   - 需要专门的推理能力
   - 任务复杂度高

4. **并行处理**
   - 需要同时处理多个独立任务
   - 任务之间互不干扰

### Sub-agents 的特点

- ✅ **优点：**
  - 可以处理复杂任务
  - 有独立的上下文和记忆
  - 适合多步骤推理
  - 可以并行执行

- ❌ **缺点：**
  - 资源消耗较高
  - 不同 agent 之间无法直接传递上下文
  - 启动开销较大
  - 管理复杂度更高

## 决策流程图

```
开始任务
    │
    ├─ 任务是否简单、单一？
    │   ├─ 是 → 使用 Skill
    │   └─ 否 ↓
    │
    ├─ 是否需要多步骤推理？
    │   ├─ 是 → 使用 Sub-agent
    │   └─ 否 ↓
    │
    ├─ 是否需要独立上下文？
    │   ├─ 是 → 使用 Sub-agent
    │   └─ 否 ↓
    │
    ├─ 功能是否可重用？
    │   ├─ 是 → 使用 Skill
    │   └─ 否 → 使用 Sub-agent
```

## 实际示例

### 使用 Skill 的场景

```python
# 示例：文件读取 Skill
skill_read_file = {
    "name": "read_file",
    "description": "读取文件内容",
    "input": {"file_path": "string"},
    "output": {"content": "string"}
}

# 使用场景：
# - 快速读取配置文件
# - 解析简单的数据文件
# - 格式化输出
```

### 使用 Sub-agent 的场景

```python
# 示例：代码审查 Sub-agent
code_review_agent = {
    "name": "code_reviewer",
    "context": "专业的代码审查专家",
    "capabilities": [
        "分析代码质量",
        "识别潜在问题",
        "提供改进建议",
        "跟踪审查历史"
    ]
}

# 使用场景：
# - 复杂的代码审查流程
# - 需要记住之前的审查结果
# - 多轮交互式审查
```

## 混合使用策略

在实际项目中，通常需要**混合使用** Skills 和 Sub-agents：

1. **Sub-agent 作为协调者**
   - Sub-agent 负责整体任务规划
   - 调用多个 Skills 执行具体操作
   - 管理任务状态和流程

2. **Skills 作为工具库**
   - 将常用功能封装为 Skills
   - Sub-agent 按需调用
   - 保持代码复用性

## 最佳实践

1. **优先使用 Skills**
   - 如果 Skill 可以满足需求，优先使用
   - 保持系统轻量级

2. **谨慎使用 Sub-agents**
   - 只在真正需要复杂推理时使用
   - 考虑资源消耗和性能影响

3. **设计清晰的接口**
   - Skills 应该有明确的输入输出
   - Sub-agents 应该有清晰的职责边界

4. **考虑维护成本**
   - Skills 之间无法共享脚本 → 考虑提取公共逻辑
   - Sub-agents 之间无法传递上下文 → 设计好数据交换机制

## 总结

| 特性 | Skills | Sub-agents |
|------|--------|------------|
| 复杂度 | 简单 | 复杂 |
| 上下文 | 无独立上下文 | 有独立上下文 |
| 资源消耗 | 低 | 高 |
| 适用场景 | 单一任务、工具类 | 多步骤推理、专业领域 |
| 可重用性 | 高 | 中等 |
| 状态管理 | 有限 | 完整 |

**核心原则：**
- **能用 Skill 解决的，不要用 Sub-agent**
- **需要复杂推理和上下文的，使用 Sub-agent**
- **两者结合使用，发挥各自优势**

